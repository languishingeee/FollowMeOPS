<!DOCTYPE html>
<html lang="tr" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Follow-Me Ops | Pro v18.1</title>

    <!-- PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#020617">
    <link rel="apple-touch-icon" href="./icon-192.png">
    <link rel="manifest" href="./manifest.json">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        hud: { bg: '#020617', panel: 'rgba(15, 23, 42, 0.8)' },
                    },
                    fontFamily: {
                        mono: ['"JetBrains Mono"', 'monospace'],
                        sans: ['"Inter"', 'sans-serif'],
                        display: ['"Rajdhani"', 'sans-serif']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'flash-red': 'flashRed 1.5s infinite',
                        'shake': 'shake 0.4s cubic-bezier(.36,.07,.19,.97) both'
                    },
                    keyframes: {
                        'slide-up': {
                            '0%': { opacity: 0, transform: 'translateY(15px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' }
                        },
                        'flashRed': {
                            '0%, 100%': { borderColor: '#ef4444', backgroundColor: 'rgba(239, 68, 68, 0.15)' },
                            '50%': { borderColor: 'transparent', backgroundColor: 'transparent' }
                        },
                        'shake': {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
                        }
                    },
                    screens: { 'xs': '375px' }
                }
            }
        }
    </script>

    <!-- Fonts & Icons - preconnect for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700;800&family=Inter:wght@400;500;600;700&family=Rajdhani:wght@500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- App Styles - External for caching -->
    <link rel="stylesheet" href="./styles.css">

    <!-- Libraries - deferred for faster FCP -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"
        defer></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js" defer></script>

    <!-- Firebase SDK (Firestore) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCPWMCjCp45PiTZ-VgskEszobpBzUFaOBk",
            authDomain: "followme-ops.firebaseapp.com",
            projectId: "followme-ops",
            storageBucket: "followme-ops.firebasestorage.app",
            messagingSenderId: "881822008",
            appId: "1:881822008:web:493ddb46ff7c56e2ea59cd"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        // Firestore referansı (Realtime Database yerine)
        const db = firebase.firestore();
        // Offline persistence'ı etkinleştir
        db.enablePersistence({ synchronizeTabs: true })
            .then(() => console.log('✅ Firestore offline persistence etkin'))
            .catch((err) => {
                if (err.code === 'failed-precondition') {
                    console.warn('⚠️ Birden fazla sekme açık');
                } else if (err.code === 'unimplemented') {
                    console.warn('⚠️ Tarayıcı offline desteklemiyor');
                }
            });
    </script>
</head>

<body class="flex flex-col h-screen text-gray-200 overflow-hidden bg-[#020617]">

    <div id="toastContainer"
        class="fixed top-24 right-4 left-4 md:left-auto md:right-6 z-[120] flex flex-col gap-3 pointer-events-none">
    </div>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="fixed inset-0 z-[200] bg-[#020617] flex flex-col items-center justify-center p-6">
        <div
            class="glass p-8 rounded-3xl w-full max-w-sm text-center border border-white/10 shadow-2xl relative overflow-hidden group">
            <div class="absolute inset-0 bg-blue-500/5 blur-3xl rounded-full scale-150 animate-pulse-slow"></div>
            <div class="relative z-10">
                <div
                    class="w-20 h-20 bg-gradient-to-br from-slate-800 to-black rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-xl border border-white/10 group-hover:border-blue-500/50 transition duration-500">
                    <i class="fa-solid fa-tower-broadcast text-4xl text-blue-500"></i>
                </div>
                <h2 class="text-2xl font-display font-bold text-white mb-1 tracking-wide">FOLLOW<span
                        class="text-blue-500">ME</span></h2>
                <p class="text-xs text-gray-400 mb-6 font-mono uppercase tracking-widest">Ops Center</p>

                <!-- Kullanıcı Girişi Butonu -->
                <button onclick="app.ui.loginAsUser()"
                    class="w-full py-4 mb-3 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-xl shadow-lg transition transform active:scale-95 text-sm tracking-widest uppercase flex items-center justify-center gap-3">
                    <i class="fa-solid fa-eye"></i> Kullanıcı Girişi
                </button>
                <p class="text-[10px] text-gray-500 mb-6">Sadece görüntüleme • Değişiklik yapılamaz</p>

                <div class="h-px bg-white/10 my-4"></div>
                <p class="text-[10px] text-gray-400 mb-3 uppercase tracking-wider">veya Admin olarak giriş yapın</p>

                <!-- Admin PIN Girişi -->
                <div class="relative">
                    <input type="password" id="pinInput" maxlength="4" placeholder="PIN" inputmode="numeric"
                        pattern="[0-9]*" autocomplete="one-time-code"
                        onkeydown="if(event.key === 'Enter') app.ui.loginAsAdmin()"
                        class="w-full bg-black/40 border border-white/10 rounded-xl py-3 text-center text-2xl font-mono text-white tracking-[0.5em] focus:border-amber-500 outline-none transition mb-3 placeholder-gray-700 shadow-inner">
                </div>
                <button onclick="app.ui.loginAsAdmin()"
                    class="w-full py-4 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 text-white font-bold rounded-xl shadow-lg shadow-amber-600/20 transition transform active:scale-95 text-sm tracking-widest uppercase flex items-center justify-center gap-3">
                    <i class="fa-solid fa-user-shield"></i> Admin Girişi
                </button>
                <p class="text-[10px] text-gray-500 mt-2">Tam yetki • Değişiklik yapabilir</p>
            </div>
        </div>
    </div>

    <!-- APP CONTENT -->
    <div id="appContent" class="flex flex-col h-full hidden opacity-0 transition-opacity duration-500">

        <header
            class="h-16 glass flex items-center justify-between px-4 md:px-8 z-50 shrink-0 border-b border-white/5 relative shadow-lg">
            <div class="flex items-center gap-3 cursor-pointer group" onclick="location.reload()">
                <div class="relative">
                    <div
                        class="absolute inset-0 bg-blue-500 blur-lg opacity-20 group-hover:opacity-40 transition duration-500">
                    </div>
                    <div
                        class="h-9 w-9 md:h-10 md:w-10 bg-gradient-to-br from-slate-800 to-slate-900 border border-white/10 rounded-xl flex items-center justify-center relative z-10 shadow-inner">
                        <i
                            class="fa-solid fa-tower-broadcast text-blue-400 text-lg transform group-hover:-translate-y-1 group-hover:translate-x-1 transition duration-500"></i>
                    </div>
                </div>
                <div>
                    <h1
                        class="font-display font-bold text-lg md:text-xl leading-none text-white tracking-wide group-hover:text-blue-400 transition">
                        FOLLOW<span class="text-blue-500">ME</span></h1>
                    <div class="text-[9px] md:text-[10px] text-gray-400 font-mono uppercase tracking-[0.3em] mt-0.5">Ops
                        Center</div>
                </div>
            </div>

            <div
                class="hidden md:flex flex-col items-center absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2">
                <div id="liveClock"
                    class="font-mono text-2xl md:text-3xl font-bold text-white tracking-tighter leading-none tabular-nums drop-shadow-md">
                    00:00:00</div>
                <div class="flex items-center gap-2 mt-1 opacity-80">
                    <span
                        class="text-[9px] md:text-[10px] font-bold text-gray-400 uppercase tracking-widest border-r border-white/10 pr-2"
                        id="liveDate">--.--.----</span>
                    <span
                        class="flex items-center gap-1 text-[9px] md:text-[10px] text-emerald-400 font-bold uppercase tracking-widest">
                        <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"></span> CANLI
                    </span>
                </div>
            </div>

            <div class="flex items-center gap-2 md:gap-3">
                <button onclick="app.ui.toggleMobileSearch()"
                    class="lg:hidden w-9 h-9 rounded-xl hover:bg-white/10 text-gray-300 flex items-center justify-center border border-transparent transition">
                    <i class="fa-solid fa-search"></i>
                </button>

                <div class="relative group hidden lg:block">
                    <i
                        class="fa-solid fa-search absolute left-4 top-2.5 text-gray-500 group-focus-within:text-blue-400 transition-colors text-xs"></i>
                    <input type="text" id="searchInput" placeholder="ARA..."
                        class="bg-slate-900/50 border border-white/10 text-white text-xs rounded-xl block w-40 lg:w-48 pl-11 pr-8 py-2 focus:border-blue-500/50 focus:w-56 transition-all duration-300 outline-none font-mono uppercase placeholder-gray-600 shadow-inner">
                    <button id="clearSearchBtn" onclick="app.ui.clearSearch()"
                        class="hidden absolute right-2 top-2 text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 transition"><i
                            class="fa-solid fa-times text-[10px]"></i></button>
                </div>

                <div
                    class="flex items-center gap-1 bg-slate-900/40 p-1 rounded-xl border border-white/5 shadow-lg backdrop-blur-sm">
                    <button onclick="app.logic.undo()"
                        class="w-9 h-8 rounded-lg bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition flex items-center justify-center"
                        title="Geri Al (Ctrl+Z)">
                        <i class="fa-solid fa-rotate-left text-sm"></i>
                    </button>
                    <button onclick="app.ui.showAddFlightModal()"
                        class="w-9 h-8 rounded-lg bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white shadow-lg shadow-emerald-600/30 hover:shadow-emerald-500/40 transition-all duration-200 flex items-center justify-center transform hover:scale-105 active:scale-95"
                        title="Uçuş Ekle">
                        <i class="fa-solid fa-plus text-sm"></i>
                    </button>
                    <div class="w-px h-5 bg-white/10 mx-0.5 hidden sm:block"></div>
                    <button onclick="app.logic.toggleUpdatedFilter()" id="btnUpdatedFilter"
                        class="px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 transition border border-transparent flex items-center gap-1.5"
                        title="Güncellenenleri Filtrele">
                        <i class="fa-solid fa-sync"></i> <span class="hidden xl:inline">GÜNCELLENMIŞ</span>
                    </button>
                    <button onclick="app.ui.showStaffFilterModal()"
                        class="w-8 h-8 rounded-lg hover:bg-white/10 text-purple-400 transition hidden sm:flex items-center justify-center relative"
                        title="Personel Filtrele" id="staffFilterBtn">
                        <i class="fa-solid fa-user-check text-sm"></i>
                        <span id="staffFilterIndicator"
                            class="hidden absolute -top-1 -right-1 w-3 h-3 bg-purple-500 rounded-full animate-pulse"></span>
                    </button>
                    <button onclick="app.ui.toggleAnalysis()"
                        class="w-8 h-8 rounded-lg hover:bg-white/10 text-yellow-500 transition hidden sm:flex items-center justify-center"
                        title="Analiz"><i class="fa-solid fa-chart-pie text-sm"></i></button>
                    <button onclick="app.logic.generatePDF()"
                        class="w-8 h-8 rounded-lg hover:bg-white/10 text-red-500 transition hidden sm:flex items-center justify-center"
                        title="PDF"><i class="fa-solid fa-file-pdf text-sm"></i></button>
                    <button onclick="app.ui.toggleSettings()"
                        class="w-8 h-8 rounded-lg hover:bg-white/10 text-blue-400 transition hidden sm:flex items-center justify-center"
                        title="Ekip"><i class="fa-solid fa-users-gear text-sm"></i></button>
                    <button onclick="app.ui.toggleMenu()"
                        class="w-8 h-8 rounded-lg hover:bg-white/10 text-gray-300 transition flex items-center justify-center relative"
                        title="Ayarlar"><i class="fa-solid fa-gear text-sm"></i></button>
                </div>
            </div>
        </header>

        <div id="mobileSearch"
            class="hidden fixed top-14 left-0 right-0 bg-[#0f172a]/95 backdrop-blur-xl border-b border-white/10 p-3 z-[100] shadow-2xl">
            <div class="relative">
                <i class="fa-solid fa-search absolute left-4 top-3 text-gray-500"></i>
                <input type="text" id="searchInputMobile" placeholder="UÇUŞ ARA (VF1054...)"
                    class="w-full bg-slate-900 border border-white/10 rounded-xl py-2.5 pl-10 pr-10 text-white text-base focus:border-blue-500 outline-none font-mono uppercase">
                <button onclick="app.ui.toggleMobileSearch()"
                    class="absolute right-3 top-2.5 text-gray-400 hover:text-white p-1"><i
                        class="fa-solid fa-times"></i></button>
            </div>
        </div>

        <div id="mainMenu" onclick="if(event.target===this) this.classList.add('hidden')"
            class="hidden fixed inset-0 z-[90] bg-black/60 backdrop-blur-sm transition-opacity">
            <div
                class="absolute top-20 right-4 w-72 glass rounded-2xl shadow-2xl animate-slide-up origin-top-right overflow-hidden border border-white/10">
                <div class="p-2 space-y-1">
                    <div
                        class="px-4 py-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest border-b border-white/5 mb-1">
                        Operasyon Menüsü</div>
                    <div class="sm:hidden space-y-1 pb-2 border-b border-white/5 mb-1">
                        <button onclick="app.ui.toggleAnalysis()"
                            class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition text-sm font-medium text-yellow-500 hover:text-yellow-400 text-left"><i
                                class="fa-solid fa-chart-pie w-5"></i> Analiz</button>
                        <button onclick="app.logic.generatePDF()"
                            class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition text-sm font-medium text-red-500 hover:text-red-400 text-left"><i
                                class="fa-solid fa-file-pdf w-5"></i> PDF Rapor</button>
                        <button onclick="app.ui.toggleSettings()"
                            class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition text-sm font-medium text-blue-400 hover:text-blue-300 text-left"><i
                                class="fa-solid fa-users-gear w-5"></i> Ekip Yönetimi</button>
                    </div>
                    <label
                        class="admin-only flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl cursor-pointer transition text-sm font-bold text-gray-300 hover:text-white group">
                        <div
                            class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-500 group-hover:bg-emerald-500 group-hover:text-white transition">
                            <i class="fa-solid fa-file-excel"></i>
                        </div>Excel Yükle <input type="file" id="fileInput" class="hidden" accept=".xlsx, .csv"
                            onchange="app.logic.handleFileUpload(event)">
                    </label>
                    <button onclick="app.logic.generateVisualReport()"
                        class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition text-sm font-bold text-gray-300 hover:text-white text-left group">
                        <div
                            class="w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-500 group-hover:bg-indigo-500 group-hover:text-white transition">
                            <i class="fa-solid fa-image"></i>
                        </div>Görsel Özet İndir
                    </button>
                    <button onclick="app.ui.showPerformanceReport('today')"
                        class="w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition text-sm font-bold text-gray-300 hover:text-white text-left group">
                        <div
                            class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-500 group-hover:bg-emerald-500 group-hover:text-white transition">
                            <i class="fa-solid fa-chart-bar"></i>
                        </div>Personel Performansı
                    </button>
                    <button onclick="app.ui.refreshLiveInfo()" id="menuLiveRefreshBtn"
                        class="admin-only w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 rounded-xl transition text-sm font-bold text-gray-300 hover:text-white text-left group">
                        <div
                            class="w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center text-cyan-500 group-hover:bg-cyan-500 group-hover:text-white transition">
                            <i class="fa-solid fa-satellite-dish"></i>
                        </div>Canlı Güncelle
                    </button>
                    <div class="h-px bg-white/5 my-2"></div>
                    <button onclick="app.data.saveToJson()"
                        class="admin-only w-full flex items-center gap-3 px-4 py-2 hover:bg-white/5 rounded-xl transition text-xs font-medium text-gray-400 hover:text-white text-left group"><i
                            class="fa-solid fa-download w-5 text-center"></i> Yedek Al</button>
                    <label
                        class="admin-only w-full flex items-center gap-3 px-4 py-2 hover:bg-white/5 rounded-xl transition text-xs font-medium text-gray-400 hover:text-white text-left group cursor-pointer"><i
                            class="fa-solid fa-upload w-5 text-center"></i> Yedek Yükle <input type="file"
                            onchange="app.data.loadFromJson(this)" class="hidden" accept=".json"></label>
                    <div class="h-px bg-white/5 my-2"></div>
                    <button onclick="app.ui.confirmReset()"
                        class="admin-only w-full flex items-center gap-3 px-4 py-3 hover:bg-red-500/10 rounded-xl transition text-xs font-bold text-red-500 text-left group">
                        <div
                            class="w-8 h-8 rounded-lg bg-red-500/10 flex items-center justify-center text-red-500 group-hover:bg-red-500 group-hover:text-white transition">
                            <i class="fa-solid fa-trash"></i>
                        </div>Sistemi Sıfırla
                    </button>
                </div>
            </div>
        </div>

        <!-- Filter & Shift Bar (Sticky) -->
        <div
            class="bg-[#020617]/95 backdrop-blur border-b border-white/5 p-3 flex justify-between items-center gap-3 sticky top-0 z-40 shadow-xl overflow-x-auto no-scrollbar">
            <!-- Shift Info / Trigger -->
            <div class="flex items-center gap-2 cursor-pointer group shrink-0" onclick="app.ui.showShiftConfig()">
                <div
                    class="w-8 h-8 rounded-lg bg-blue-600/10 border border-blue-600/30 flex items-center justify-center text-blue-500 group-hover:bg-blue-600 group-hover:text-white transition">
                    <i class="fa-solid fa-sliders"></i>
                </div>
                <div class="flex flex-col">
                    <span class="text-[9px] font-bold text-gray-500 uppercase tracking-widest">AKTİF VARDİYA</span>
                    <span id="activeShiftLabel"
                        class="text-xs font-bold text-white uppercase tracking-wide group-hover:text-blue-400 transition">VARDİYA
                        YOK</span>
                </div>
            </div>

            <!-- View Filters -->
            <div class="flex items-center gap-2 w-full md:w-auto overflow-x-auto no-scrollbar pb-1 md:pb-0">
                <button onclick="app.ui.setFilter('all')" id="filter-all"
                    class="flex-1 md:flex-none px-4 py-1.5 rounded-xl text-[10px] font-bold uppercase transition text-white bg-white/10 border border-white/5 whitespace-nowrap">Tümü</button>
                <button onclick="app.ui.setFilter('focus')" id="filter-focus"
                    class="flex-1 md:flex-none px-4 py-1.5 rounded-xl text-[10px] font-bold uppercase transition text-gray-400 border border-transparent whitespace-nowrap">Odak</button>
                <button onclick="app.ui.setFilter('completed')" id="filter-completed"
                    class="flex-1 md:flex-none px-4 py-1.5 rounded-xl text-[10px] font-bold uppercase transition text-gray-400 border border-transparent whitespace-nowrap">Biten</button>
            </div>
        </div>

        <main onclick="app.ui.closeMenus(event)"
            class="flex-1 overflow-y-auto p-2 md:p-6 lg:px-12 relative custom-scroll scroll-smooth">
            <div id="emptyState"
                class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-0">
                <div
                    class="glass p-8 md:p-10 rounded-3xl border border-white/10 text-center max-w-sm pointer-events-auto shadow-2xl relative overflow-hidden mx-4">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent opacity-50"></div>
                    <div
                        class="w-20 h-20 bg-blue-500/10 rounded-2xl flex items-center justify-center mx-auto mb-6 ring-1 ring-blue-500/30 shadow-[0_0_50px_rgba(59,130,246,0.15)] relative z-10">
                        <i class="fa-solid fa-tower-broadcast text-4xl text-blue-500 animate-pulse"></i>
                    </div>
                    <h2 class="text-xl md:text-2xl font-display font-bold text-white mb-2 tracking-wide relative z-10">
                        Vardiya Bekleniyor</h2>
                    <p class="text-xs text-gray-400 mb-8 font-medium leading-relaxed relative z-10">Günlük operasyon
                        listesini yükleyerek<br>sistemi aktif hale getirin.</p>
                    <label
                        class="cursor-pointer bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-xl transition flex items-center justify-center gap-2 text-sm shadow-xl shadow-blue-600/20 active:scale-95 relative z-10"><i
                            class="fa-solid fa-cloud-arrow-up"></i><span>DOSYA SEÇ</span><input type="file"
                            onchange="app.logic.handleFileUpload(event)" class="hidden" accept=".xlsx, .csv"></label>
                </div>
            </div>
            <div id="flightGrid"
                class="grid grid-cols-1 xl:grid-cols-2 gap-3 md:gap-4 pb-32 relative z-10 max-w-8xl mx-auto"></div>
        </main>

        <footer
            class="h-14 glass border-t border-white/5 flex items-center justify-between px-4 md:px-6 text-[10px] font-bold text-gray-500 uppercase tracking-widest z-50">
            <div class="flex gap-4 md:gap-6 overflow-x-auto no-scrollbar w-full items-center">
                <span class="flex items-center gap-2 whitespace-nowrap"><i
                        class="fa-solid fa-list text-gray-400"></i><span class="hidden sm:inline">Toplam:</span><span
                        id="statTotal" class="text-white">0</span></span>
                <span class="flex items-center gap-2 whitespace-nowrap"><i
                        class="fa-solid fa-eye text-blue-500"></i><span class="hidden sm:inline">Odak:</span><span
                        id="statFocus" class="text-blue-400">0</span></span>
                <span class="flex items-center gap-2 whitespace-nowrap"><i
                        class="fa-solid fa-check-circle text-emerald-500"></i><span
                        class="hidden sm:inline">Biten:</span><span id="statDone"
                        class="text-emerald-400">0</span></span>
                <span class="flex items-center gap-2 whitespace-nowrap"><i
                        class="fa-solid fa-user-astronaut text-purple-500"></i><span
                        class="hidden sm:inline">Atanan:</span><span id="statAssigned"
                        class="text-purple-400">0</span></span>
            </div>
            <div id="saveStatus"
                class="opacity-0 transition-opacity text-emerald-500 flex items-center gap-2 font-bold tracking-wider hidden md:flex">
                <i class="fa-solid fa-floppy-disk animate-bounce"></i> <span>KAYITLI</span>
            </div>
        </footer>

        <!-- MOBILE BOTTOM NAVIGATION - Only visible on mobile -->
        <nav id="mobileBottomNav"
            class="md:hidden fixed bottom-0 left-0 right-0 z-[60] glass border-t border-white/10 backdrop-blur-xl">
            <div class="flex items-center justify-around py-2 px-1">
                <!-- Excel Upload (Admin Only) -->
                <label
                    class="admin-only flex flex-col items-center gap-1 p-2 rounded-xl active:bg-white/10 transition cursor-pointer">
                    <div class="w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center">
                        <i class="fa-solid fa-file-excel text-emerald-500 text-lg"></i>
                    </div>
                    <span class="text-[9px] text-gray-400 font-bold uppercase">Excel</span>
                    <input type="file" class="hidden" accept=".xlsx, .csv" onchange="app.logic.handleFileUpload(event)">
                </label>

                <!-- Search -->
                <button onclick="app.ui.toggleMobileSearch()"
                    class="flex flex-col items-center gap-1 p-2 rounded-xl active:bg-white/10 transition">
                    <div class="w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center">
                        <i class="fa-solid fa-search text-blue-400 text-lg"></i>
                    </div>
                    <span class="text-[9px] text-blue-400 font-bold uppercase">Ara</span>
                </button>

                <!-- Staff Filter (Everyone) -->
                <button onclick="app.ui.showStaffFilterModal()"
                    class="flex flex-col items-center gap-1 p-2 rounded-xl active:bg-white/10 transition relative">
                    <div class="w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center">
                        <i class="fa-solid fa-user-check text-purple-400 text-lg"></i>
                    </div>
                    <span class="text-[9px] text-purple-400 font-bold uppercase">Filtre</span>
                    <span id="mobileStaffFilterIndicator"
                        class="hidden absolute top-1 right-3 w-2.5 h-2.5 bg-purple-500 rounded-full animate-pulse"></span>
                </button>

                <!-- Role Switch -->
                <button id="mobileRoleBtn" onclick="app.ui.showRoleSwitchModal()"
                    class="flex flex-col items-center gap-1 p-2 rounded-xl active:bg-white/10 transition">
                    <div id="mobileRoleIcon"
                        class="w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center">
                        <i id="mobileRoleIconI" class="fa-solid fa-user-shield text-amber-400 text-lg"></i>
                    </div>
                    <span id="mobileRoleLabel" class="text-[9px] text-amber-400 font-bold uppercase">Admin</span>
                </button>

                <!-- Menu -->
                <button onclick="app.ui.toggleMenu()"
                    class="flex flex-col items-center gap-1 p-2 rounded-xl active:bg-white/10 transition">
                    <div class="w-10 h-10 rounded-full bg-slate-700/50 flex items-center justify-center">
                        <i class="fa-solid fa-bars text-gray-300 text-lg"></i>
                    </div>
                    <span class="text-[9px] text-gray-400 font-bold uppercase">Menü</span>
                </button>
            </div>
        </nav>
        <!-- MODALS -->

        <!-- Shift Config Modal -->
        <div id="shiftConfigModal" onclick="if(event.target===this) this.classList.add('hidden')"
            class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-[110] flex items-center justify-center p-4 transition-opacity cursor-pointer">
            <div
                class="glass bg-slate-900 rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up border border-white/10">
                <div class="p-6 text-center border-b border-white/5">
                    <div class="w-16 h-16 bg-blue-600/10 rounded-2xl flex items-center justify-center mx-auto mb-4"><i
                            class="fa-solid fa-calendar-check text-3xl text-blue-500"></i></div>
                    <h3 class="font-display font-bold text-2xl text-white">Vardiya Planlama</h3>
                    <p class="text-xs text-gray-400 mt-2">Vardiya türünü ve odak saatlerini belirleyin.</p>
                </div>
                <div class="p-6 space-y-6">
                    <!-- Shift Type Selection -->
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="app.ui.selectShiftType('day')" id="sc-btn-day"
                            class="shift-btn active py-3 rounded-xl text-xs font-bold uppercase bg-white/5 hover:bg-white/10 text-gray-400">Gündüz</button>
                        <button onclick="app.ui.selectShiftType('night')" id="sc-btn-night"
                            class="shift-btn py-3 rounded-xl text-xs font-bold uppercase bg-white/5 hover:bg-white/10 text-gray-400">Gece</button>
                        <button onclick="app.ui.selectShiftType('all')" id="sc-btn-all"
                            class="shift-btn py-3 rounded-xl text-xs font-bold uppercase bg-white/5 hover:bg-white/10 text-gray-400">Tümü</button>
                    </div>

                    <!-- Custom Time Range -->
                    <div id="customTimeRange" class="space-y-2">
                        <label class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">Odak Saat
                            Aralığı</label>
                        <div class="flex items-center gap-3">
                            <div class="flex-1 bg-black/30 rounded-xl border border-white/10 px-4 py-2 flex flex-col">
                                <span class="text-[9px] text-gray-500 font-bold mb-1">BAŞLANGIÇ</span>
                                <input type="time" id="sc-start"
                                    class="bg-transparent text-white font-mono font-bold text-lg outline-none"
                                    value="08:00">
                            </div>
                            <div class="text-gray-600"><i class="fa-solid fa-arrow-right"></i></div>
                            <div class="flex-1 bg-black/30 rounded-xl border border-white/10 px-4 py-2 flex flex-col">
                                <span class="text-[9px] text-gray-500 font-bold mb-1">BİTİŞ</span>
                                <input type="time" id="sc-end"
                                    class="bg-transparent text-white font-mono font-bold text-lg outline-none"
                                    value="20:00">
                            </div>
                        </div>
                        <p class="text-[10px] text-gray-500 italic mt-2 text-center">* Gece vardiyasında bitiş saati
                            ertesi günü temsil eder.</p>
                    </div>

                    <button onclick="app.logic.applyShiftConfig()"
                        class="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg shadow-blue-600/30 transition transform active:scale-95 uppercase tracking-wide text-sm">
                        Operasyonu Başlat
                    </button>
                </div>
            </div>
        </div>

        <!-- Analysis Modal -->
        <div id="analysisModal" onclick="if(event.target === this) app.ui.toggleAnalysis()"
            class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-[100] flex items-center justify-center p-4 transition-opacity">
            <div
                class="glass bg-slate-900 rounded-3xl w-full max-w-5xl shadow-2xl overflow-hidden animate-slide-up flex flex-col max-h-[90vh] border border-white/10">
                <div class="p-4 md:p-6 border-b border-white/10 flex justify-between items-center bg-white/5">
                    <div class="flex items-center gap-4">
                        <div
                            class="w-10 h-10 rounded-xl bg-yellow-500/10 border border-yellow-500/20 flex items-center justify-center text-yellow-500">
                            <i class="fa-solid fa-chart-line text-xl"></i>
                        </div>
                        <h3 class="font-display font-bold text-2xl text-white tracking-wide">Analiz</h3>
                    </div>
                    <button onclick="app.ui.toggleAnalysis()"
                        class="w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition text-gray-400 hover:text-white"><i
                            class="fa-solid fa-times text-xl"></i></button>
                </div>
                <div id="analysisContent" class="p-4 md:p-8 overflow-y-auto custom-scroll"></div>
            </div>
        </div>

        <!-- Staff Modal -->
        <div id="staffModal" onclick="if(event.target === this) app.ui.toggleSettings()"
            class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-[100] flex items-center justify-center p-4">
            <div
                class="glass bg-slate-900 w-full max-w-md rounded-3xl overflow-hidden shadow-2xl animate-slide-up border border-white/10">
                <div class="p-5 border-b border-white/10 flex justify-between items-center bg-white/5">
                    <h3
                        class="font-display font-bold text-lg text-white uppercase tracking-wide flex items-center gap-3">
                        <i class="fa-solid fa-users text-blue-500"></i> Ekip Yönetimi
                    </h3>
                    <button onclick="app.ui.toggleSettings()" class="text-gray-400 hover:text-white"><i
                            class="fa-solid fa-times text-lg"></i></button>
                </div>
                <div class="p-5">
                    <div class="flex gap-3 mb-5">
                        <input type="text" id="newStaffName" placeholder="YENİ İSİM"
                            class="flex-1 bg-slate-800 border border-white/10 rounded-xl px-4 py-2 text-base md:text-sm text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                        <button onclick="app.logic.addStaff()"
                            class="bg-blue-600 hover:bg-blue-500 text-white px-4 rounded-xl font-bold shadow-lg shadow-blue-600/30 transition transform active:scale-95"><i
                                class="fa-solid fa-plus"></i></button>
                    </div>
                    <div id="staffList" class="max-h-64 overflow-y-auto space-y-2 pr-1 custom-scroll"></div>
                </div>
            </div>
        </div>

        <!-- Reset Confirm Modal -->
        <div id="confirmModal"
            onclick="if(event.target === this) document.getElementById('confirmModal').classList.add('hidden')"
            class="hidden fixed inset-0 bg-black/95 backdrop-blur-xl z-[110] flex items-center justify-center p-4">
            <div
                class="glass p-8 rounded-3xl text-center max-w-sm w-full animate-slide-up border border-red-500/30 shadow-[0_0_80px_rgba(239,68,68,0.2)] bg-[#0f172a]">
                <div
                    class="w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500 ring-1 ring-red-500/40">
                    <i class="fa-solid fa-triangle-exclamation text-3xl"></i>
                </div>
                <h3 class="text-xl font-display font-bold text-white mb-2">Emin misiniz?</h3>
                <p class="text-xs text-gray-400 mb-8 font-medium leading-relaxed">Tüm veriler silinecek.</p>
                <div class="flex gap-3">
                    <button onclick="document.getElementById('confirmModal').classList.add('hidden')"
                        class="flex-1 py-3 bg-white/5 hover:bg-white/10 text-gray-300 rounded-xl font-bold text-xs uppercase transition tracking-wider border border-white/5">Vazgeç</button>
                    <button onclick="app.ui.smartReset()"
                        class="flex-1 py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-bold text-xs uppercase shadow-lg shadow-red-600/30 transition tracking-wider transform hover:scale-[1.02]">TEMİZLE</button>
                </div>
            </div>
        </div>
        <!-- Add Flight Modal -->
        <div id="addFlightModal" onclick="if(event.target === this) app.ui.toggleAddFlightModal()"
            class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-[100] flex items-center justify-center p-4">
            <div
                class="glass bg-slate-900 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden animate-slide-up border border-white/10">
                <div class="p-6 border-b border-white/10 flex justify-between items-center bg-white/5">
                    <div class="flex items-center gap-4">
                        <div
                            class="w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-emerald-500">
                            <i class="fa-solid fa-plane-circle-plus text-xl"></i>
                        </div>
                        <h3 class="font-display font-bold text-2xl text-white tracking-wide">Manuel Uçuş Ekle</h3>
                    </div>
                    <button onclick="app.ui.toggleAddFlightModal()"
                        class="w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition text-gray-400 hover:text-white"><i
                            class="fa-solid fa-times text-xl"></i></button>
                </div>
                <div class="p-6 space-y-4 max-h-[70vh] overflow-y-auto custom-scroll">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Uçuş
                                Tipi</label>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="app.ui.selectFlightType('ARR')" id="af-type-arr"
                                    class="py-3 rounded-xl text-xs font-bold uppercase bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500 hover:text-white transition"><i
                                        class="fa-solid fa-plane-arrival mr-1"></i> Geliş</button>
                                <button onclick="app.ui.selectFlightType('DEP')" id="af-type-dep"
                                    class="py-3 rounded-xl text-xs font-bold uppercase bg-white/5 text-gray-400 border border-white/10 hover:bg-white/10 transition"><i
                                        class="fa-solid fa-plane-departure mr-1"></i> Gidiş</button>
                            </div>
                        </div>
                        <div>
                            <label
                                class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Saat</label>
                            <input type="time" id="af-time"
                                class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-mono font-bold shadow-inner">
                        </div>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Uçuş
                            Numarası</label>
                        <input type="text" id="af-flightno" placeholder="TK1234"
                            class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                    </div>
                    <div>
                        <label
                            class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Havayolu</label>
                        <input type="text" id="af-airline" placeholder="TURKISH AIRLINES"
                            class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Rota</label>
                            <input type="text" id="af-route" placeholder="ISTANBUL"
                                class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Kapı
                                (Opsiyonel)</label>
                            <input type="text" id="af-gate" placeholder="12"
                                class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-mono font-bold shadow-inner placeholder-gray-600">
                        </div>
                    </div>
                    <button onclick="app.logic.addManualFlight()"
                        class="w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl shadow-lg shadow-emerald-600/30 transition transform active:scale-95 uppercase tracking-wide text-sm flex items-center justify-center gap-2"><i
                            class="fa-solid fa-plus"></i> Uçuş Ekle</button>
                </div>
            </div>
        </div>

        <!-- Add Flight Modal -->
        <div id="addFlightModal" onclick="if(event.target === this) app.ui.toggleAddFlightModal()"
            class="hidden fixed inset-0 bg-black/90 backdrop-blur-md z-[100] flex items-center justify-center p-4">
            <div
                class="glass bg-slate-900 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden animate-slide-up border border-white/10">
                <div class="p-6 border-b border-white/10 flex justify-between items-center bg-white/5">
                    <div class="flex items-center gap-4">
                        <div
                            class="w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-emerald-500">
                            <i class="fa-solid fa-plane-circle-plus text-xl"></i>
                        </div>
                        <h3 class="font-display font-bold text-2xl text-white tracking-wide">Manuel Uçuş Ekle</h3>
                    </div>
                    <button onclick="app.ui.toggleAddFlightModal()"
                        class="w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition text-gray-400 hover:text-white"><i
                            class="fa-solid fa-times text-xl"></i></button>
                </div>
                <div class="p-6 space-y-4 max-h-[70vh] overflow-y-auto custom-scroll">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Uçuş
                                Tipi</label>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="app.ui.selectFlightType('ARR')" id="af-type-arr"
                                    class="py-3 rounded-xl text-xs font-bold uppercase bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500 hover:text-white transition"><i
                                        class="fa-solid fa-plane-arrival mr-1"></i> Geliş</button>
                                <button onclick="app.ui.selectFlightType('DEP')" id="af-type-dep"
                                    class="py-3 rounded-xl text-xs font-bold uppercase bg-white/5 text-gray-400 border border-white/10 hover:bg-white/10 transition"><i
                                        class="fa-solid fa-plane-departure mr-1"></i> Gidiş</button>
                            </div>
                        </div>
                        <div>
                            <label
                                class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Saat</label>
                            <input type="time" id="af-time"
                                class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-mono font-bold shadow-inner">
                        </div>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Uçuş
                            Numarası</label>
                        <input type="text" id="af-flightno" placeholder="TK1234"
                            class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                    </div>
                    <div>
                        <label
                            class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Havayolu</label>
                        <input type="text" id="af-airline" placeholder="TURKISH AIRLINES"
                            class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Rota</label>
                            <input type="text" id="af-route" placeholder="ISTANBUL"
                                class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-bold uppercase shadow-inner placeholder-gray-600">
                        </div>
                        <div>
                            <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-2">Kapı
                                (Opsiyonel)</label>
                            <input type="text" id="af-gate" placeholder="12"
                                class="w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-base text-white focus:border-blue-500 outline-none font-mono font-bold shadow-inner placeholder-gray-600">
                        </div>
                    </div>
                    <button onclick="app.logic.addManualFlight()"
                        class="w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl shadow-lg shadow-emerald-600/30 transition transform active:scale-95 uppercase tracking-wide text-sm flex items-center justify-center gap-2"><i
                            class="fa-solid fa-plus"></i> Uçuş Ekle</button>
                </div>
            </div>
        </div>

        <!-- Excel Merge Modal -->
        <div id="excelMergeModal"
            class="hidden fixed inset-0 z-[150] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
            <div class="bg-slate-900/95 rounded-2xl border border-white/10 shadow-2xl p-6 max-w-md w-full">
                <div class="text-center mb-6">
                    <div class="w-14 h-14 bg-amber-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <i class="fa-solid fa-file-excel text-2xl text-amber-400"></i>
                    </div>
                    <h3 class="text-lg font-bold text-white mb-2">Mevcut Veri Tespit Edildi</h3>
                    <p class="text-sm text-gray-400">Zaten yüklenmiş uçuş verisi var. Ne yapmak istersiniz?</p>
                </div>
                <div class="space-y-3">
                    <button onclick="app.logic.mergeExcelData()"
                        class="w-full py-3 px-4 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl flex items-center justify-center gap-3 transition transform active:scale-95 shadow-lg">
                        <i class="fa-solid fa-code-merge"></i>
                        <span>Güncelle / Birleştir</span>
                    </button>
                    <p class="text-[10px] text-gray-500 text-center -mt-1 mb-2">Sadece değişen verileri günceller, aynı
                        kalan uçuşlara dokunmaz</p>
                    <button onclick="app.logic.replaceWithNewExcel()"
                        class="w-full py-3 px-4 bg-red-600/80 hover:bg-red-500 text-white font-bold rounded-xl flex items-center justify-center gap-3 transition transform active:scale-95">
                        <i class="fa-solid fa-rotate"></i>
                        <span>Tamamen Değiştir</span>
                    </button>
                    <p class="text-[10px] text-gray-500 text-center -mt-1 mb-2">Mevcut tüm veriyi siler, yeni Excel ile
                        başlar</p>
                    <button
                        onclick="document.getElementById('excelMergeModal').classList.add('hidden'); app.logic.pendingExcelData = null;"
                        class="w-full py-2 px-4 bg-white/5 hover:bg-white/10 text-gray-400 font-bold rounded-xl transition">
                        İptal
                    </button>
                </div>
            </div>
        </div>

        <!-- Personel Performans Raporu Modal -->
        <div id="performanceModal" onclick="if(event.target === this) this.classList.add('hidden')"
            class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm">
            <div
                class="bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto shadow-2xl">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white flex items-center gap-2">
                        <i class="fa-solid fa-chart-bar text-blue-400"></i>
                        Personel Performans Raporu
                    </h3>
                    <div class="flex items-center gap-2">
                        <!-- Admin için Düzenle butonu -->
                        <button onclick="app.ui.showStatsEditor()"
                            class="admin-only text-amber-400 hover:text-amber-300 text-sm font-bold px-3 py-1 rounded-lg bg-amber-500/10 border border-amber-500/20 hover:bg-amber-500/20 transition flex items-center gap-1">
                            <i class="fa-solid fa-pen-to-square"></i>
                            Düzenle
                        </button>
                        <button onclick="document.getElementById('performanceModal').classList.add('hidden')"
                            class="text-gray-400 hover:text-white text-2xl">&times;</button>
                    </div>
                </div>

                <!-- Filtre Seçimi -->
                <div class="flex gap-2 mb-4">
                    <button onclick="app.ui.showPerformanceReport('today')" id="perfFilterToday"
                        class="flex-1 py-2 px-3 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-lg text-sm font-bold hover:bg-blue-500/30 transition">Bugün</button>
                    <button onclick="app.ui.showPerformanceReport('week')" id="perfFilterWeek"
                        class="flex-1 py-2 px-3 bg-white/5 text-gray-400 border border-white/10 rounded-lg text-sm font-bold hover:bg-white/10 transition">Bu
                        Hafta</button>
                    <button onclick="app.ui.showPerformanceReport('month')" id="perfFilterMonth"
                        class="flex-1 py-2 px-3 bg-white/5 text-gray-400 border border-white/10 rounded-lg text-sm font-bold hover:bg-white/10 transition">Bu
                        Ay</button>
                    <button onclick="app.ui.showPerformanceReport('all')" id="perfFilterAll"
                        class="flex-1 py-2 px-3 bg-white/5 text-gray-400 border border-white/10 rounded-lg text-sm font-bold hover:bg-white/10 transition">Tümü</button>
                </div>

                <!-- Rapor İçeriği -->
                <div id="performanceContent" class="space-y-3">
                    <!-- JS ile doldurulacak -->
                </div>

                <!-- Toplam -->
                <div id="performanceTotal" class="mt-4 pt-4 border-t border-white/10 text-center">
                    <!-- JS ile doldurulacak -->
                </div>
            </div>
        </div>

        <datalist id="staffOptions"></datalist>

        <script src="config.js"></script>
        <script src="app.js" defer></script>
</body>

</html>